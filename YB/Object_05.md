# 책임 할당하기

### 책임 주도 설계를 향해

- p134~135
    - 데이터보다 행동을 먼저 결정하라
        - 객체가 수행하는 행동이란 곧 책임을 의미한다
        - "이 객체가 수행해야 하는 책임(역할)은 무엇인가"를 결정한 후에 필요한 데이터를 결정한다.
    - 협력이라는 문맥 안에서 책임을 결정하라
        - 객체가 메시지를 선택하는것이 아니라 메시지를 결정한 후에 객체를 선택해야 한다.
        - 객체의 입장에서는 책임이 조금 어색하더라도 협력에 적합하다면 좋은것이다.

### 책임 할당을 위한 GRASP 패턴

- p137~145

    - GRASP은 `General Reponsibility Assignment Software Pattern` 의 약자로 객체에게 책임을 할당할 때 지침으로 삼을 수 있는 원칙들의 집합을 패턴 형식으로 정리한것.

    - **도메인 개념에서 출발하기**

        - 어떤 책임을 할당해야 할 때 가장 먼저 고민해야 하는 유력한 후보는 바로 도메인 개념이다.
        - 설계를 시작하는 것이 중요하기 때문에, 도메인 개념을 정리하는 데 너무 많은 시간을 들이지 말고 빠르게 설계와 구현을 진행하라.

    - 정보 전문가에게 책임을 할당하라

        - 객체에게 책임을 할당하는 첫 번째 원칙은 책임을 수행할 정보를 알고 있는 객체에게 책임을 할당하는 것이다

        - 정보 전문가 패턴(`InformationExpert`)

            > 메시지를 통해 책임을 수행하기 위해 가장 적절한 객체를 찾는것 -> 도메인 개념 설계를 통해 + 가장 적합한 객체는 적합한 상태를 갖는 객체가 아니라 역할을 수행하는것에 초점을 맞추어야함

        - 책임을 수행하는 객체가 정보를 알고 있다고 해서 그 정보를 저장하고 있을 필요는 없다.

        - 객체에게 책임을 할당할 때 가장 기본이 되는 책임 할당 원칙이다.

    - **높은 응집도와 낮은 결합도**

        - 책임을 할당할 수 있는 다양한 대안들이 존재한다면 응집도와 결합도의 측면에서 더 나은 대안을 선택하는 것이 좋다.

    - **창조자에게 객체 생성 책임을 할당하라**

        - `CREATOR`패턴의 의도는 어떤 방식으로든 생성되는 객체와 연결되거나 관련될 필요가 있는 객체에 해당 객체를 생성할 책임을 맡기는 것이다.
        - 이미 존재하는 객체 사이의 관계를 이용하기 때문에 설계가 낮은 결합도를 유지할 수 있게 한다.

### 구현을 통한 검증

- p147
    - `screening`이 `Movie` 의 내부 구현에 대한 지식 없이 전송할 메시지를 결정했다는것 처럼 우선적으로 책임을 수행할 객체로 결정하면 `Movie` 의 내부 구현을 깔끔하게 캡슐화 할 수 있다.
- p152
    - 설계를 개선하는 작업은 변경의 이유가 하나 이상인 클래스를 찾는것으로 부터 시작하는 것이 좋다.
    - 클래스의 속성이 서로 다른 시점에 초기화되거나 일부만 초기화 된다는 것은 응집도가 낮다는 증거이다. 따라서 함께 초기화되는 속성을 기준으로 코드를 분리해야한다.

- **다형성을 통해 분리하기** p158~159

    - 객체의 암시적인 타입에 따라 행동을 분기해야 한다면 암시적인 타입을 명시적인 클래스로 정의하고 행동을 나눔으로써 응집도 문제를 해결할 수 있다. 

    - 객체의 타입에 따라 변하는 행동이 있다면 타입을 분리하고 변화하는 행동을 각 타입의 책임으로 할당하라는 것이다.

        > 타입을 분리 -> Protocol ?
        >
        > 각 타입의 책임으로 할당 -> 채택 ?

    - 변경을 캡슐화하도록 책임을 할당하는 것을 `PROTECTED VARIATIONS(변경보호) 패턴` 이라고 부른다.

        - 변경될 가능성이 높으면 캡슐화하라

- p163

    - 객체지향은 도메인의 개념과 구조를 반영한 코드를 가능하게 만들기 때문에 도메인의 구조가 코드의 구조를 이끌어 내는 것은 자연스러울 뿐만 아니라 바람직한 것이다.

### 책임 주도 설계의 대안

- p168
    - 메서드가 명령문들의 그룹으로 구성되고 각 그룹에 주석을 달아야 할 필요가 있다면 그 메서드의 응집도는 낮은것이다.
- p171
    - 각 메서드는 단 하나의 이유에 의해서만 변경된다.
- p174
    - 데이터 중심으로 구현한 후 이를 리팩터링하더라도 유사하거나 더 좋은 결과물을 낳을 수도 있다.